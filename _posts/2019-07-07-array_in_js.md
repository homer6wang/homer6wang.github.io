---
layout: post
title: 关于队列中循环链表的一些脑洞
date: 2019-07-07
tags: [js, 数组, 队列, 链表, 技术]
---
最近开始二刷极客时间的《数据结构与算法》专栏，队列这一章是在地铁站等人的时候看的，关于循环队列的空和满的状态判断，一开始让我比较疑惑，于是才有了以下的一些脑洞。

循环队列避免了数据迁移，一般情况下出入队时间复杂度均为O(1)。

循环的环大小是固定的，head 和 tail 指针在环内按规则移动。

初始状态，head 和 tail 指针是重合的，也不难想到任何的空状态，head 和 tail 指针也必然会重合。

利用数组实现的循环队列，队满状态条件被设定为，head 和 tail 指针的下标满足 (tail + 1) % n = head，这样 tail 指向的节点将不能用于存储数据。脑洞就此开始。

有没有办法不浪费 tail 节点？如果有，tail 必然就和 head 重合，将无法与空状态区分。那么有没有办法在重合时区分这两种状态呢？

我的想法是这样的，在环内，永远都是 tail 先移动，然后再是 head 移动，并且 head 不会超过 tail。如果把 head 和 tail 看做长跑选手，head 将是常败将军，tail 也顶多套一圈 head。于是，当 head 和 tail 并列的时候，如果是 head 刚好追上 tail，说明是空状态；如果是 tail 刚好套一圈 head，则说明是满状态。

如果我们以某一边界为起跑线，并分别记录 head 和 tail 越过该界限的次数，相等即为空，否则就为满。

当然，我们也可以进一步只记录它们共同越过起跑线的次数，偶数为空，奇数为满。

开个脑洞，记录一下思维过程而已，没什么可行性。

> [原始链接]({{page.url}}) 版权声明：自由转载-非商用-非衍生-保持署名
